/* YRSS 1.0.4 */
/* Copyright (c) 2016 Mark Hillard - MIT License */

!function(e){"use strict";e.fn.rssfeed=function(r,a,i){var n={ssl:!1,limit:10,showerror:!0,errormsg:"",tags:!1,date:!0,dateformat:"default",titletag:"h4",content:!0,snippet:!0,snippetimage:!1,snippetlimit:120,linktarget:"_self"};return a=e.extend(n,a),this.each(function(n,s){var l="";if(a.ssl&&(l="s"),e(s).hasClass("rssFeed")||e(s).addClass("rssFeed"),null===r)return!1;var o="http"+l+"://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from feed where url="'+r+'"');null!==a.limit&&(o+=" limit "+a.limit),o+="&format=json",e.getJSON(o,function(r,n,l){if("success"===n)t(s,r,a),e.isFunction(i)&&i.call(this,e(s));else if("error"===n||"parsererror"===n){if(!a.showerror)return!1;var o;o=""!==a.errormsg?a.errormsg:l,e(s).html('<div class="rssError"><p>'+o+"</p></div>")}})})};var t=function(t,r,a){var i=r.query.results.item;if(e.isArray(i)||(i=[i]),!i)return!1;var n,s="";e.each(i,function(e){var t,r=i[e];void 0!==r.category&&(t=(""+r.category).toLowerCase().replace(/ /g,"-").replace(/,/g," "));var n;if(r.pubDate){var l=new Date(r.pubDate);if("default"===a.dateformat)n=""+(l.getMonth()+1)+"/"+l.getDate()+"/"+l.getFullYear();else if("spellmonth"===a.dateformat){var o=["January","February","March","April","May","June","July","August","September","October","November","December"];n=o[l.getMonth()]+" "+l.getDate()+", "+l.getFullYear()}else"localedate"===a.dateformat?n=l.toLocaleDateString():"localedatetime"===a.dateformat&&(n=l.toLocaleDateString()+" "+l.toLocaleTimeString())}if(s+='<div class="entryWrapper"',a.tags&&void 0!==r.category&&(s+='data-tag="'+t+'"'),s+='><div class="entryTitle"><'+a.titletag+'><a href="'+r.link+'">'+r.title+"</a></"+a.titletag+"></div>",a.date&&n&&(s+='<div class="entryDate">'+n+"</div>"),a.content){var c=r.description;s+='<div class="entryContent">'+c+"</div>"}s+="</div>"}),n=e(s),a.content&&e.each(n,function(){if(a.snippet){if(a.snippetimage){var t=e(this).find("img").first();0!==t.length&&(e(this).prepend('<div class="entryImage">'),e(this).find(".entryImage").append(t).nextAll().wrapAll('<div class="entryText"></div>'))}var r=e(this).find(".entryContent"),i=e(r).text().length;r.text(function(e,t){return i>a.snippetlimit?t.substring(0,a.snippetlimit)+" ...":t})}}),e(t).append(n),e("a",t).attr("target",a.linktarget)}}(jQuery);
